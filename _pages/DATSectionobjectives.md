# DAT Section objectives

Every objective in the objective section adds requirements to automatically win the map. These are shown during map play in the objectives tab next to the messages. Once an objective is complete, it is shown as a check mark in the objective section and it is no longer processed.

Objectives are set at map load time and cannot be added to or removed from - they are static.

There are five different types of objectives:
- building
- discovertile
- findbuilding
- resources
- variable

There may only be a single resources key, but the rest may have as many as needed.

>If the info section has an oxygen: statement, then the map automatically has a requirement to not run out of air, if air ever gets to 0 the player loses the map.

>Since the objective section is also processed by the script engine, the above keywords are also reserved words in script - no event chain or variables may have the above five names.

## building

building: adds a building construction objective. It may have a count requiring at least that number of buildings. The objective is complete once the player has built that number of the given building. Format is:

```mms
building:class count
```
class is the collection class for the building and is one of:
- BuildingCanteen_C
- BuildingDocks_C
- BuildingElectricFence_C
- BuildingGeologicalCenter_C
- BuildingMiningLaser_C
- BuildingOreRefinery_C
- BuildingPowerStation_C
- BuildingSupportStation_C
- BuildingSuperTeleport_C
- BuildingTeleportPad_C
- BuildingToolStore_C 2
- BuildingUpgradeStation_C

count an optional positive integer and defaults to 1. It is the number of buildings of that class required.

Example: Construct two of every building except Docks where only one is required:
```mms
objectives{
building:BuildingCanteen_C 2
building:BuildingDocks_C
building:BuildingElectricFence_C 2
building:BuildingGeologicalCenter_C 2
building:BuildingMiningLaser_C 2
building:BuildingOreRefinery_C 2
building:BuildingPowerStation_C 2
building:BuildingSupportStation_C 2
building:BuildingSuperTeleport_C 2
building:BuildingTeleportPad_C 2
building:BuildingToolStore_C 2 2
building:BuildingUpgradeStation_C 2
}
```

## discovertile

This allows an objective to be completed when a specific tile is visible. This tile cannot be part of a building. Usually this would be one of the floor tiles contained within an undiscovered cavern and when the cavern is discovered, the objective is marked as complete. The format is:

```mms
discovertile:row,col/Text Message
```
row,col are the row and column for the tile. The text to display is after the forward slash character.

There is no known limit on the number of discovertile keys in the objective section.

## findbuilding

This allows the discovery of a building at a specific location. Similar to discovertile, but the messsage text is automatically generated by the engine to be the building on that tile.

Format is:
```mms
findbuilding:row,col
```

row,col are the row and column that the building is on. It is an error to provide a row,col where there is no building.

There is no known limit on the number of findbuilding keys in the objective section.

## resources

Use of resources: key adds a crystal, ore and stud resources required to automatically win. The format is:

```mms
resources: crystals,ore,studs
```

Where crystals, ore, studs are positive integers with the amount of that resource needed. If a value is 0 then that resource has no collection requirement.

Example of requiring 20 crystals, 30 ore and 40 building studs to win the map.
```mms
objectives{
resources: 20,30,40
}
```

There may only be a single resources: key in the objectives section.

## variable

The variable: tag allows an objective that has access to conditional statements from the scripting system. It is similar to a script conditional. If the conditional is true, the player completes that objective. The format is:

```mms
variable:conditional/Text message
```

Unlike script the conditional is not inside of double parentheses.

Example
```mms
variable:crystals>=100/Collect 100 crystals
```

The above creates an objective with the text "Collect 100 crystals" that will be completed if the user collects at least 100 crystals. The conditional is evaluated by the script engine so it has access to macros and user variables.

The forward slash character separates the conditional from the text. The text is every character after the forward slash.

If using a script variable and the variable does not exist, the objective cannot be completed.

There is no known limit on the number of variable objectives in the objectives section but very large numbers may slow down play due to processing of the objectives on every tick.

>Be careful with use of variable conditions. If the condition is in error - or it is not possible in the script logic for this condition to be true, the user may not be able to win map unless the script uses the `win` event. This may itself be useful to add new objectives that are communicated by the `msg` event that are not part of the objective display.

>Script allow another way to win the map by use of the `win` event. This event causes the player to immediately win the map.  This allows alternative way(s) to win the map.  There is also a `lose` event that causes the player to lose the map.


