# DAT Section info

The info section is required and written by the map editor on every save. It contains key:value pairs of important information about the map. Not all values are used with every map, if a value is missing then its default value is used.

The keys are in ANSI western (a-z) format. There is no space between the key and the colon character. After the colon character is the value for that key without any leading spaces. Every character after the colon is considered part of the value until the end of the line.

The order of key:value pairs is not important but the map editor does write them in a somewhat unorganized order. These are the keys in alphabetical order.

| key | value |
|---|---|
|biome:|`rock`, `lava`, `ice`|
|cameraangle:|X,Y,Z angles in degrees. Legacy value|
|camerapos:| location, rotation and scale of camera.|
|camerazoom:|legacy value|
|colcount:|number of columns in the map.|
|creator:|player that created map.|
|erosioninitialwaittime:|value in seconds|
|erosionscale:|global multiplier on lava erosion|
|initialcrystals:|starting number of crystals|
|initialore:|starting number of ore|
|levelname:|name of level|
|opencaves:|row,col/...|
|oxygen:|initial,max|
|rowcount:|number of rows in the map.|
|spidermin:|minimum number of spiders to spawn|
|spidermax:|maximum number of spiders to spawn|
|spiderrate:|probability percentage of wall collapse spawning spiders|
|version:|version of engine that saved the map in yyyy-mm-dd format.|


## biome
Set to `rock`, `lava`, `ice`

## cameraangle
Floating point values. X,Y,Z angles in degrees. Note that the order is traditional graphics X,Y,Z order (column, row, height). Legacy values no longer generated by the map editor. TODO need more info.

## camerapos

Mix of text keywords and floating point values. The camera has a X,Y,Z location, a P,Y,R rotation, and an X,Y,Z scale.  Note that X,Y,Z order is traditional graphics X,Y,Z order (column, row, height)

Format:
```
Translation: X=value Y=value Z=value Rotation: P=value Y=value R=value Scale X=value Y=value Z=value
```

Translation:
- X= floating point X location, this is in 300 units per tile. This is the same value returned by the .X data member.
- Y= floating point Y location, this is in 300 units per tile. This is the same value returned by the .Y data member.
- Z= floating point Z location, this is in 300 units per tile. This is the same value returned by the .Z data member.

Rotation:
- P= floating point in degrees (-180 - 180). Pitch around the X axis.
- Y= floating point in degrees (-180 - 180). Yaw around the Y axis.
- R= floating point in degrees (-180 - 180), Roll around the Z axis.

Scale  (notice no colon character)
- X= floating point X scale, default is 1.0.
- Y= floating point Y scale, default is 1.0.
- Z= floating point Z scale, default is 1.0.

The default camera is at the center of the map with a P of 45 - this means a 45 degree angle for the camera looking down. Yaw is -90 so the 0,0 tile is upper left.
The default scale is 1.0, 1.0, 1.0
The default rotation is 0

## camerazoom
Floating point value. Legacy option no longer generated by map editor. Values are floating point. TODO need more info.

## colcount
Integer value. This is the number of columns (X) tiles - can be considered the width of the map in the default view. The smallest possible colcount is 3. The map borders are part of this count.

## creator
Name of the player that created the map. Do not enclose the name in double quotes. It does not change when saving the map - only on the initial creation. Non ansi western characters including extended UTF8/16 sequences appear to work, and will cause the map editor to save using UTF16LE BOM format.

## erosioninitialwaittime
Floating point value. Number of seconds the game waits from the start before starting any erosions. This is a global erosion delay, after the provided number of seconds from the game start, erosions may begin. Optional value, default is 0 seconds.

## erosionscale
Floating point value. Global multiplier on lava erosion. Optional value, default is 1.0. This value is the initial value for the script erosionscale macro.

This value is a multiplier on the time durations. By default 1.0, setting 2.0 will double the length of time for erosion. Setting to 0.0 will prevent any erosions permanently in the map.

## initialcrystals
Integer value. Amount of crystals the player starts with. Optional value, default is 0.

## initialore
Integer value. Amount of ore the player starts with. Optional value, default is 0.

## levelname
Optional name of map. All characters from the : until the end of line are part of the map name including spaces. Do not enclose the name in double quotes. Once it is set, the name never changes even after saving. Non ansi western characters including extended UTF8/16 sequences appear to work, and will cause the map editor to save using UTF16LE BOM format.

## opencaves
Integer row,col/ values. This is a list of row,col pairs with a forward slash after every row,col pair. It defines a tile that is initially discovered when the map is loaded. The engine will look at every tile starting at this location and identify a closed region that surrounds that tile - and that net closed region will be visible when the map starts.  If there is no closed region, the entire map is visible.

Many legacy maps do not have this value. In that case, the engine attempts to automatically detect what is the initial open location. Generally this works, but there are cases where it is incorrect. The only way to fix those maps is to open it with the map editor, remove any incorrect open cave flags, and add open cave flags to those areas that should be visible.

## oxygen
Optional integer initial/maximum values. This has two parameters, first is the initial air value that the map starts with, and the second is the maximum air value, separated by a forward slash.  [Click for detailed information about air](_pages/Air).

If this option is missing, then air is unlimited.

## rowcount
Integer value. This is the number of rows (Y) tiles - can be considered the height of the map in the default view. The smallest possible rowcount is 3. The map borders are part of this count.

## spidermin
Optional integer value. Minimum number of spiders that could spawn from a drill. Default value is 0.

## spidermax
Optional integer value. Maximum number of spiders that could spawn from a drill. Default value is 0.

## spiderrate
Optional floating point value. Probability percentage ( 0.0 - 100.0, floating point value) that a collapsing wall could cause spiders. If they do spawn, between the spidermin and spidermax spiders will spawn. Default value is 0.

## version
This is the version of the game engine that last saved this map. It is in `yyyy-mm-dd` format (year-month-day)

## Example for an empty 8x8 new .DAT created by map editor.

```mms
info{
rowcount:8
colcount:8
camerapos:Translation: X=1200.000 Y=1200.000 Z=0.000 Rotation: P=44.999989 Y=-89.999992 R=0.000002 Scale X=1.000 Y=1.000 Z=1.000
biome:rock
creator:Tyab
spiderrate:10
spidermin:2
spidermax:4
version:2023-08-14-1
opencaves:3,4/
}
```